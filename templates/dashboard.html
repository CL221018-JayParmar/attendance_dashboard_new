{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4">Employee Management</h2>
<a href="{{ url_for('new_employee') }}" class="btn btn-success rounded-pill mb-3 px-4">+ Add New Employee</a>

<div class="row g-4 mb-4">
  <div class="col-md-4">
    <div class="card border-0 shadow-sm text-center p-4 bg-primary text-white rounded">
      <p class="mb-1">Total Employees</p>
      <h3 class="fw-bold">{{ total_employees }}</h3>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card border-0 shadow-sm text-center p-4 bg-success text-white rounded">
      <p class="mb-1">Captures Available</p>
      <h3 class="fw-bold">{{ captured_count }}</h3>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card border-0 shadow-sm text-center p-4 bg-warning text-dark rounded">
      <p class="mb-1">Pending Captures</p>
      <h3 class="fw-bold">{{ pending_count }}</h3>
    </div>
  </div>
</div>

<div class="table-responsive shadow rounded bg-white">
  <table class="table table-hover align-middle mb-0">
    <thead class="table-primary text-white">
      <tr>
        <th>Name</th><th>Department</th><th>Email</th><th>Contact</th><th>Face</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for emp in employees %}
      <tr>
        <td>{{ emp.name }}</td>
        <td>{{ emp.department }}</td>
        <td>{{ emp.email }}</td>
        <td>{{ emp.contact }}</td>
        <td>
          {% if emp.face_data_folder %}
          <span class="badge bg-success">Captured</span>
          {% else %}
          <span class="badge bg-warning text-dark">Pending</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('edit_employee', id=emp.id) }}" class="btn btn-sm btn-warning me-1 rounded-pill">Edit</a>
          <a href="{{ url_for('capture_face', id=emp.id) }}" class="btn btn-sm btn-primary me-1 rounded-pill">Capture Face</a>
          <form method="POST" action="{{ url_for('delete_employee', id=emp.id) }}" style="display:inline;" onsubmit="return confirm('Are you sure?')">
            <button type="submit" class="btn btn-sm btn-danger rounded-pill">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

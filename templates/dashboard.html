{% extends 'base.html' %}
{% block content %}
<style>
  .page-header {
    display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;
  }
  .page-header h2 { font-weight:700; color:#222b45;}
  .btn-add {
    background:#e6eeff;
    color:#222b45;
    border:2px solid #baccf7;
    border-radius:99px;
    font-weight:600;
    font-size:1.08rem;
    padding:0.53rem 2rem;
    box-shadow: 0 2px 10px rgba(44,62,80,0.07);
    transition:filter 0.18s, background 0.18s;
    text-decoration:none;
    display:inline-block;
  }
  .btn-add:hover, .btn-add:active {
    background:#d6e6fc; color:#2563eb; border-color:#2563eb;
  }
  .stats-card {
    background:#fff; border:none; border-radius:20px;
    box-shadow:0 4px 16px rgba(44,62,80,0.06);
    text-align:center; padding:1.4rem 1rem 1rem;
    margin-bottom:0.5rem;
  }
  .stats-count { color:#2563eb; font-size:2.1rem; font-weight:700;}
  .stats-label { color:#222b45; font-size:1.06rem; font-weight:500;}
  .table-responsive {
    border-radius:1.1rem; box-shadow: 0 2px 10px rgba(44,62,80,0.06);
    background:#fff; margin-top:2rem;
  }
  .table thead { background:#e6eeff;}
  .table thead th { color:#2563eb !important; font-weight:600; border:none; font-size:1.02rem;}
  .table tbody tr:hover { background:#f6f7fa;}
  .action-btn {
    background:#e6eeff;
    color:#222b45;
    border:2px solid #baccf7;
    border-radius:99px;
    font-weight:600;
    font-size:.99rem;
    padding:.37rem 1.2rem; margin-right:0.28rem;
    box-shadow:0 2px 7px rgba(44,62,80,0.06);
    transition:filter 0.17s, background 0.17s;
    text-decoration:none !important; display:inline-block;
  }
  .action-btn:hover, .action-btn:active {
    background:#d6e6fc; color:#2563eb; border-color:#2563eb;
  }
  .badge-captured, .badge-pending {
    background:#e6eeff; color:#2563eb; font-weight:600; border-radius:999px; padding:.4em 1em; border:2px solid #baccf7;
  }
</style>

<div class="page-header">
  <h2>Employee Management</h2>
  <a href="{{ url_for('new_employee') }}" class="btn-add">Add New Employee</a>
</div>

<div class="row g-4 mb-4">
  <div class="col-md-4">
    <div class="stats-card">
      <div class="stats-count">{{ total_employees }}</div>
      <div class="stats-label">Total Employees</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="stats-card">
      <div class="stats-count">{{ captured_count }}</div>
      <div class="stats-label">Face Captured</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="stats-card">
      <div class="stats-count">{{ pending_count }}</div>
      <div class="stats-label">Pending Captures</div>
    </div>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-striped table-hover align-middle mb-0">
    <thead>
      <tr>
        <th>Name</th>
        <th>Department</th>
        <th>Email</th>
        <th>Contact</th>
        <th>Face Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for emp in employees %}
      <tr>
        <td>{{ emp.name }}</td>
        <td>{{ emp.department }}</td>
        <td>{{ emp.email }}</td>
        <td>{{ emp.contact }}</td>
        <td>
          {% if emp.face_data_folder %}
            <span class="badge-captured">Captured</span>
          {% else %}
            <span class="badge-pending">Pending</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('edit_employee', id=emp.id) }}" class="action-btn">Edit</a>
          <a href="{{ url_for('capture_face', id=emp.id) }}" class="action-btn">Capture Face</a>
          <form method="POST" action="{{ url_for('delete_employee', id=emp.id) }}" style="display:inline;" onsubmit="return confirm('Are you sure?')">
            <button type="submit" class="action-btn">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

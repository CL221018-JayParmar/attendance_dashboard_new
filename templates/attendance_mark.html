{% extends 'base.html' %}
{% block content %}
<style>
  .attendance-container {
    max-width: 600px;
    margin: 3rem auto;
    text-align: center;
    background: #fff;
    padding: 2.3rem 2rem 2.2rem;
    border-radius: 24px;
    box-shadow: 0 6px 28px rgba(44,62,80,0.06);
  }
  h2 {
    font-weight: 700;
    color: #222b45;
    margin-bottom: 1.8rem;
  }
  p {
    font-size: 1.05rem;
    color: #293e5e;
    margin-bottom: 1.6rem;
  }
  #video {
    width: 100%;
    max-width: 480px;
    border-radius: 18px;
    border: 2px solid #baccf7;
    box-shadow: 0 3px 15px rgba(44,62,80,0.08);
    margin: 0 auto 1.8rem auto;
    display: block;
  }
  #mark-btn {
    background: #e6eeff;
    color: #222b45;
    border: 2px solid #baccf7;
    border-radius: 9999px;
    padding: 0.55rem 2.2rem;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 3px 12px rgba(44,62,80,0.05);
    transition: background-color 0.2s ease, border-color 0.2s ease;
  }
  #mark-btn:hover {
    background: #d6e6fc;
    border-color: #2563eb;
    color: #2563eb;
  }
  #status {
    margin-top: 1.2rem;
    font-weight: 600;
    color: #2563eb;
  }
</style>

<div class="attendance-container">
  <h2>Employee Attendance System</h2>
  <p>Position yourself in front of the camera and click "Mark Attendance"</p>
  <video id="video" autoplay playsinline></video>
  <button id="mark-btn">Mark My Attendance</button>
  <div id="status">Camera ready</div>
</div>

<script>
  const video = document.getElementById('video');
  const status = document.getElementById('status');
  const markBtn = document.getElementById('mark-btn');

  navigator.mediaDevices.getUserMedia({video:true})
    .then((stream) => {
      video.srcObject = stream;
      status.style.color = "#22c55e";
      status.textContent = "Camera ready";
    })
    .catch(() => {
      status.style.color = "#ef4444";
      status.textContent = "Camera access denied";
    });

  markBtn.onclick = async () => {
    status.style.color = "#2563eb";
    status.textContent = "Marking attendance...";
    // Your attendance mark logic here
    // Example: send frame, face recognition, etc.
    // After process:
    // status.textContent = "Attendance marked successfully";
  };
</script>
{% endblock %}
